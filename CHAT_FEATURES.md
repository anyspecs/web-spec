# ContextHub 对话功能

## 功能概述

ContextHub 现在支持强大的 AI 对话功能，允许用户：

1. **自选模型对话**：选择不同的 AI 模型进行对话
2. **基于 Context 对话**：使用已有的 .ct 文件作为对话上下文
3. **实时交互**：流畅的聊天界面体验

## 主要特性

### 🤖 多模型支持
- **GPT-4**：最强大的语言模型，适合复杂任务
- **GPT-3.5 Turbo**：快速且经济的模型，适合日常对话
- **Claude 3 Sonnet**：平衡性能和成本的优秀选择
- **Claude 3 Opus**：强大的推理能力，适合分析和创作

### ⚙️ 模型参数配置
- **温度 (Temperature)**：控制回答的创造性（0-2）
- **最大令牌数**：限制回答长度
- **Top P**：控制词汇选择的多样性
- **频率惩罚**：减少重复内容
- **存在惩罚**：鼓励新话题

### 💬 智能对话界面
- **自动滚动**：新消息自动滚动到底部
- **消息复制**：一键复制任何消息内容
- **输入提示**：支持 Enter 发送，Shift+Enter 换行
- **加载状态**：显示 AI 思考过程
- **消息时间戳**：记录每条消息的时间和使用的模型

### 📁 Context 集成
- **一键启动**：从 Context 列表直接启动对话
- **上下文信息**：显示基于的 Context 文件信息
- **System Prompt 自动加载**：自动应用 Context 中的系统提示词
- **历史对话继承**：可以基于已有对话继续交流

## 使用方法

### 1. 普通对话
1. 点击顶部导航栏的"AI对话"按钮
2. 选择想要使用的 AI 模型
3. 调整模型参数（可选）
4. 开始对话

### 2. 基于 Context 的对话
1. 在 Context 列表中找到想要使用的文件
2. 点击蓝色的对话图标 💬
3. 系统会自动加载 Context 的 System Prompt
4. 基于 Context 内容开始对话

### 3. 模型切换
- 在对话过程中可以随时切换模型
- 新的回答将使用新选择的模型
- 历史消息会显示使用的模型信息

## 界面说明

### 左侧边栏
- **模型选择器**：选择和配置 AI 模型
- **模型信息**：显示当前模型的详细信息
- **参数调节**：实时调整模型参数

### 主对话区域
- **Context 信息栏**：显示当前使用的 Context 文件（如有）
- **消息列表**：显示完整的对话历史
- **输入框**：支持多行输入和快捷键操作

### 消息样式
- **用户消息**：蓝色背景，右对齐
- **AI 回答**：白色背景，左对齐
- **系统消息**：不显示，但会影响 AI 行为

## 技术特点

### 🎨 设计风格
- 遵循 GitHub 设计规范
- 响应式布局，适配不同屏幕
- 流畅的动画和过渡效果

### 🔧 技术实现
- React 18 + TypeScript
- 实时状态管理
- 模块化组件设计
- 类型安全的 API 接口

### 🚀 性能优化
- 虚拟滚动（大量消息时）
- 智能重渲染优化
- 内存使用优化

## 未来规划

- [ ] 支持更多 AI 模型
- [ ] 对话历史保存和管理
- [ ] 多轮对话模板
- [ ] 对话导出功能
- [ ] 团队协作功能
- [ ] API 接口集成
- [ ] 语音输入支持
- [ ] 图片和文件上传

## 开发说明

对话功能的主要组件：

- `ModelSelector.tsx`：模型选择和配置组件
- `ChatInterface.tsx`：对话界面组件  
- `Chat.tsx`：对话页面主组件
- `types/chat.ts`：对话相关类型定义

所有组件都遵循统一的设计规范和代码规范，便于维护和扩展。 